/*
 Angular Resource Tastypie v1.0.0
 (c) 2014 Marcos W. Ferretti, http://br.linkedin.com/in/mwferretti/
 License: MIT
*/
function TastypieProvider(g){g.defaults.useXDomain=!0;delete g.defaults.headers.common["X-Requested-With"];g.defaults.headers.common["Content-Type"]="application/json";var k="",c="",a={username:"",api_key:""},d={};this.setResourceUrl=function(a){k=a;a=document.createElement("a");a.href=k;c=a.protocol+"//"+a.hostname;""!=a.port&&(c=c+":"+a.port)};this.setAuth=function(c,e){a.username=c;a.api_key=e;g.defaults.headers.common.Authorization="ApiKey "+a.username+":"+a.api_key};this.getRoutesException=function(){return d};
this.setRoutesException=function(a){if(!a)throw"[$tastypie] Arg0 [data] is required.";if(!angular.isObject(a))throw"[$tastypie] Arg0 [data] is not object.";d=a};this.getAuth=function(){return a};this.getResourceUrl=function(){return k};this.getResourceDomain=function(){return c};this.$get=function(){return{resource_url:this.getResourceUrl(),resource_domain:this.getResourceDomain(),auth:this.getAuth(),routes_exception:this.getRoutesException(),setAuth:this.setAuth,setResourceUrl:this.setResourceUrl,
setRoutesException:this.setRoutesException}}}function RouteExceptionService(g,k){var c={};this.redirect=function(a){c=k.routes_exception;if(!c.hasOwnProperty(String(a)))return!1;g.path(c[String(a)]);return!0}}
function TastypiePaginatorFactory(g,k,c){function a(e,a,b){this.resource=e;this.filters=a||{};this.meta={};this.objects=[];this.len=this.index=0;this.range=[];d(this,b)}function d(e,a){if(!angular.isObject(a.meta))throw"[$tastypiePaginator] Invalid django-tastypie object.";e.meta=a.meta;angular.forEach(a.objects,function(b,f){a.objects[f]=e.resource.objects.$create(b)});e.objects=a.objects;e.len=Math.ceil(a.meta.total_count/a.meta.limit);e.index=0==a.meta.offset?1:Math.ceil(a.meta.offset/a.meta.limit)+
1;for(var b=[],f=1;f<=e.len;f++)b.push(f);e.range=b}function l(e,a){a&&g(a).get().$promise.then(function(a){d(e,a)},function(a){if(!c.redirect(a.status))throw"[$tastypiePaginator] ".concat(a.statusText);})}function e(a,h,b){(h!=a.index||b)&&0<h&&h<=a.len&&(b=angular.copy(a.filters),b.offset=(h-1)*a.meta.limit,g(a.resource.endpoint,a.resource.defaults).get(b).$promise.then(function(b){b.meta.offset==b.meta.total_count?e(a,h-1,!0):d(a,b)},function(a){if(!c.redirect(a.status))throw"[$tastypiePaginator] ".concat(a.statusText);
}))}a.prototype.change=function(a){a&&e(this,a,!1)};a.prototype.next=function(){this.meta.next&&l(this,k.resource_domain+this.meta.next)};a.prototype.previous=function(){this.meta.previous&&l(this,k.resource_domain+this.meta.previous)};a.prototype.refresh=function(){e(this,this.index,!0)};a.prototype.first=function(){e(this,1,!1)};a.prototype.last=function(){e(this,this.len,!1)};return a}
function TastypieObjectsFactory(g,k,c){function a(a){this.resource=a}function d(a,d){var h=g(a.resource.endpoint,{id:"@id"},{post:{method:"POST"},save:{method:"POST"},get:{method:"GET",url:a.resource.endpoint+":id%2f"},get_uri:{method:"GET",url:a.resource.endpoint+":id%2f"},update:{method:"PATCH",url:a.resource.endpoint+":id%2f"},put:{method:"PUT",url:a.resource.endpoint+":id%2f"},patch:{method:"PATCH",url:a.resource.endpoint+":id%2f"},"delete":{method:"DELETE",url:a.resource.endpoint+":id%2f"},remove:{method:"DELETE",
url:a.resource.endpoint+":id%2f"}});delete h.prototype.$query;h.prototype.$get=function(a){a=a||this;if(!a.hasOwnProperty("id"))throw"[$tastypieObjects] Attribute [id] is required.";a=this.$get_uri(a);a.then(null,function(a){if(!c.redirect(a.status))throw"[$tastypieObjects] ".concat(a.statusText);});return a};h.prototype.$save=function(){var b=null,b=this.hasOwnProperty("id")?this.$put():this.$post();b.then(function(b){typeof a.resource.page.refresh==typeof Function&&a.resource.page.refresh()},function(a){if(!c.redirect(a.status))throw"[$tastypieObjects] ".concat(a.statusText);
});return b};h.prototype.$update=function(b){b=b||this;if(!b.hasOwnProperty("id"))throw"[$tastypieObjects] Attribute [id] is required.";var f=null,f=this.$patch(b);f.then(function(b){typeof a.resource.page.refresh==typeof Function&&a.resource.page.refresh()},function(a){if(!c.redirect(a.status))throw"[$tastypieObjects] ".concat(a.statusText);});return f};h.prototype.$delete=function(b){b=b||this;var f=this;if(!b.hasOwnProperty("id"))throw"[$tastypieObjects] Attribute [id] is required.";return this.$remove(b).then(function(){angular.forEach(f,
function(a,b){delete f[b]});typeof a.resource.page.refresh==typeof Function&&a.resource.page.refresh()},function(a){if(!c.redirect(a.status))throw"[$tastypieObjects] ".concat(a.statusText);})};h.prototype.$clear=function(){var a=this;angular.forEach(a,function(e,c){delete a[c]})};return new h(d)}function l(a){var d=g(a.resource.endpoint,a.resource.defaults,{get:{method:"GET"},find:{method:"GET"}});delete d.prototype.$query;delete d.prototype.$save;d.prototype.$find=function(d){var b=this.$get(d),
f=this;b.then(function(b){a.resource.page=new k(a.resource,d,b);f.page=a.resource.page;delete f.meta;delete f.objects},function(b){a.resource.page={};f.page={};if(!c.redirect(b.status))throw"[$tastypieObjects] ".concat(b.statusText);});return b};return new d}a.prototype.$create=function(a){return d(this,a)};a.prototype.$get=function(a){return d(this,a).$get()};a.prototype.$delete=function(a){return d(this,a).$delete()};a.prototype.$find=function(a){return l(this).$find(a)};a.prototype.$update=function(a){return d(this,
a).$update()};return a}function TastypieResourceFactory(g,k,c,a){return function(d,c){if(!d)throw"[$tastypieResource] Unknown service name.";this.endpoint=k.resource_url+d+"%2f";this.defaults=c||{};this.page={};this.objects=new a(this)}}var ResourceTastypieModule=angular.module("ngResourceTastypie",["ngResource"]);TastypieProvider.$inject=["$httpProvider"];ResourceTastypieModule.provider("$tastypie",TastypieProvider);RouteExceptionService.$inject=["$location","$tastypie"];
ResourceTastypieModule.service("$RouteException",RouteExceptionService);TastypiePaginatorFactory.$inject=["$resource","$tastypie","$RouteException"];ResourceTastypieModule.factory("$tastypiePaginator",TastypiePaginatorFactory);TastypieObjectsFactory.$inject=["$resource","$tastypiePaginator","$RouteException"];ResourceTastypieModule.factory("$tastypieObjects",TastypieObjectsFactory);TastypieResourceFactory.$inject=["$resource","$tastypie","$tastypiePaginator","$tastypieObjects"];
ResourceTastypieModule.factory("$tastypieResource",TastypieResourceFactory);
